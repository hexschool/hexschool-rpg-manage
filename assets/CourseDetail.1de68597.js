import{l as z,N as G,m as $,r as U,o as H,z as w,a as d,c as n,b as e,A as o,f as p,F as h,q as v,p as V,x as b,g as P,D as m,E as R,h as f,w as T,Q as O,C as Q}from"./index.b171e68b.js";import{b as J}from"./bsTab.22ff94d2.js";import{a as K}from"./courses.72b4d97b.js";import{a as W}from"./assistant.dd4561b8.js";import"./tab.ac64535a.js";const X={class:"about px-4 mt-4"},Y={class:"border-bottom border-light pb-2 mb-4"},Z={"aria-label":"breadcrumb"},ee={class:"breadcrumb"},se={class:"breadcrumb-item"},ae=e("li",{class:"breadcrumb-item active","aria-current":"page"}," \u7DE8\u8F2F\u8AB2\u7A0B ",-1),te=e("h1",{class:"fs-4 mb-0"}," \u7DE8\u8F2F\u8AB2\u7A0B ",-1),le={class:"row"},oe={class:"col-md-4"},ie={id:"list-tab",class:"list-group mb-3 mb-md-0",role:"tablist"},de=["id","href","aria-controls","onClick"],ne={class:"col-md-8"},re={id:"nav-tabContent",class:"tab-content"},ce={id:"list-home","data-bs-target":"list-home",class:"tab-pane fade show active",role:"tabpanel","aria-labelledby":"list-home-list"},ue={class:"card shadow-sm rounded-4 overflow-hidden mb-4"},me=e("div",{class:"card-header bg-white py-3"},[e("h2",{class:"fs-6 mb-0 lh-base"}," \u8AB2\u7A0B\u8A2D\u5B9A ")],-1),_e={class:"card-body"},be={class:"mb-3"},he=e("label",{for:"name",class:"form-label"},"\u8AB2\u7A0B\u540D\u7A31",-1),ve={class:"mb-3"},fe=e("label",{for:"assistants",class:"form-label"},"\u9810\u8A2D\u52A9\u6559",-1),pe=e("option",{value:"",disabled:""}," \u8ACB\u9078\u64C7\u52A9\u6559 ",-1),ye=["value"],ge={class:"text-end"},we=["disabled"],Ve={key:0,id:"udemy_info","data-bs-target":"udemy_info",class:"tab-pane fade",role:"tabpanel","aria-labelledby":"list-udemy-list"},ke={class:"card shadow-sm rounded-4 overflow-hidden mb-4",role:"tabpanel","aria-labelledby":"list-home-list"},Ce=e("div",{class:"card-header bg-white py-3"},[e("h2",{class:"fs-6 mb-0 lh-base"}," Udemy \u8A2D\u5B9A ")],-1),xe={class:"card-body"},De={class:"mb-3"},$e=e("label",{for:"udemy-name",class:"form-label"},"\u8AB2\u7A0B\u540D\u7A31",-1),Ue={class:"mb-3"},Te=e("label",{for:"description",class:"form-label"},"\u8AB2\u7A0B\u63CF\u8FF0",-1),Me=["innerHTML"],qe={class:"mb-3"},Le=e("label",{for:"abbr-name",class:"form-label"},"\u8AB2\u7A0B\u7E2E\u5BEB",-1),Se={class:"mb-3"},Ie=e("label",{for:"amount",class:"form-label"},"\u8AB2\u7A0B\u8A3B\u518A\u4EBA\u6578",-1),Ae={key:1,id:"teachable_info","data-bs-target":"teachable_info",class:"tab-pane fade",role:"tabpanel","aria-labelledby":"list-teachable-list"},Ne={class:"card shadow-sm rounded-4 overflow-hidden mb-4",role:"tabpanel","aria-labelledby":"list-home-list"},Fe=e("div",{class:"card-header bg-white py-3"},[e("h2",{class:"fs-6 mb-0 lh-base"}," Teachable \u8A2D\u5B9A ")],-1),Ee={class:"card-body"},Be={class:"mb-3"},je=e("label",{for:"teachableId",class:"form-label"},"Teachable ID",-1),ze={class:"mb-3"},Ge=e("label",{for:"teachableName",class:"form-label"},"\u8AB2\u7A0B\u540D\u7A31",-1),He={class:"mb-3"},Pe=e("label",{for:"teachableAmount",class:"form-label"},"\u8AB2\u7A0B\u8A3B\u518A\u4EBA\u6578",-1),Re={id:"list-lectures","data-bs-target":"list-teachable",class:"tab-pane fade",role:"tabpanel","aria-labelledby":"list-lectures-list"},Oe={class:"card shadow-sm rounded-4 overflow-hidden mb-4"},Qe=e("div",{class:"card-header bg-white py-3 d-flex"},[e("h2",{class:"fs-6 mb-0 lh-base",style:{"margin-right":"260px"}}," Teachable \u7AE0\u7BC0 "),e("h2",{class:"fs-6 mb-0 lh-base"}," Udemy \u7AE0\u7BC0 ")],-1),Je={class:"card-body pt-2"},Ke={class:"row"},We={class:"col-md-6"},Xe={class:"list-group list-group-numbered"},Ye={class:"w-100"},Ze={class:"fw-bold mb-2"},es={class:"list-group mb-3"},ss={class:"col-md-6"},as={class:"list-group list-group-numbered"},ts={class:"w-100"},ls={class:"fw-bold mb-2"},os={class:"list-group mb-3"},is={id:"list-surveys","data-bs-target":"list-surveys",class:"tab-pane fade",role:"tabpanel","aria-labelledby":"list-surveys-list"},ds={class:"card shadow-sm rounded-4 overflow-hidden mb-4"},ns=e("div",{class:"card-header bg-white py-3"},[e("h2",{class:"fs-6 mb-0 lh-base"}," \u8A55\u50F9\u8A2D\u5B9A ")],-1),rs={class:"card-body"},cs={class:"mb-3"},us=e("p",null,"\u8A55\u50F9\u529F\u80FD",-1),ms={class:"form-check form-switch"},_s=e("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"\u958B\u555F/\u95DC\u9589",-1),bs={class:"mb-3"},hs=e("label",{for:"name",class:"form-label"},"\u8A72\u8AB2\u7A0B\u6709\u88AB\u8A55\u50F9\u7684\u6642\u6578\u9577\u5EA6(\u79D2)",-1),vs=e("div",{class:"form-text"}," \u8ACB\u5230 Teachable \u8A08\u7B97\u4E94\u500B\u7AE0\u7BC0\u7684\u5F71\u97F3\u7AE0\u7BC0\u5F71\u7247\u9577\u5EA6 ",-1),fs={class:"mb-3"},ps=e("label",{for:"name",class:"form-label"},"\u8AB2\u7A0B\u5B8C\u6210\u5EA6(%)",-1),ys={key:1,class:"text-end"},gs=["disabled"],$s={__name:"CourseDetail",setup(ws){const{apiGetCourseDetail:M,apiPutCourseDetail:q,apiPutCourseSurveys:L,apiDeleteCourseSurveys:S}=K,{apiGetAssistantList:I}=W,A=z(),N=G.useLoading(),k=$([]),C=$([{id:"list-home-list",name:"\u8AB2\u7A0B\u8A2D\u5B9A",target:"list-home",active:!0,danger:!1,element:null},{id:"list-udemy-list",name:"Udemy \u8A2D\u5B9A",target:"udemy_info",active:!1,danger:!1,element:null},{id:"list-teachable-list",name:"Teachable \u8A2D\u5B9A",target:"teachable_info",active:!1,danger:!1,element:null},{id:"list-lectures-list",name:"\u7AE0\u7BC0\u5C0D\u61C9",target:"list-lectures",active:!1,danger:!1,element:null},{id:"list-surveys-list",name:"\u8A55\u50F9\u8A2D\u5B9A",target:"list-surveys",active:!1,danger:!1,element:null}]),s=U({teachable_info:{},udemy_info:{},surveys_info:{},default_assistants:[{}],lectures:[]}),x=U([]),y=async i=>{const a=N.show();try{const{course:r}=await M(i),c=r.default_assistants;s.value={...r,default_assistants:c.length===0?[{user_id:""}]:c}}catch(r){b("danger","\u53D6\u5F97\u8AB2\u7A0B\u5931\u6557",`${r.response.data.statusCode}:${r.response.data.message}`)}finally{a.hide()}},F=async i=>{const a={name:s.value.name};s.value.default_assistants&&(a.default_assistant_user_id=s.value.default_assistants[0].user_id);try{await q(i,a),b("success","\u66F4\u65B0\u8AB2\u7A0B\u6210\u529F","\u5DF2\u6210\u529F\u7DE8\u8F2F\u8AB2\u7A0B"),y(i)}catch(r){b("danger","\u66F4\u65B0\u8AB2\u7A0B\u5931\u6557",`${r.response.data.statusCode}:${r.response.data.message}`)}},D=async i=>{const a={review_threshold_sec:s.value.review_threshold_sec||1200,percent_complete_threshold_of_review:s.value.percent_complete_threshold_of_review||5};try{await L(i,a),b("success","\u66F4\u65B0\u8AB2\u7A0B\u6210\u529F","\u5DF2\u6210\u529F\u7DE8\u8F2F\u8AB2\u7A0B\u8A55\u50F9"),y(i)}catch(r){b("danger","\u66F4\u65B0\u8AB2\u7A0B\u5931\u6557",`${r.response.data.statusCode}:${r.response.data.message}`)}},E=async i=>{try{await S(i),b("success","\u66F4\u65B0\u8AB2\u7A0B\u6210\u529F","\u5DF2\u6210\u529F\u95DC\u9589\u8AB2\u7A0B\u8A55\u50F9"),y(i)}catch(a){b("danger","\u66F4\u65B0\u8AB2\u7A0B\u5931\u6557",`${a.response.data.statusCode}:${a.response.data.message}`)}},B=async()=>{try{const{assistants:i}=await I();x.value=i}catch(i){b("danger","\u7372\u53D6\u52A9\u6559\u5217\u8868\u5931\u6557",`${i.response.data.statusCode}:${i.response.data.message}`)}};H(()=>{const{id:i}=A.params;y(i),B(),J(k,C)});const j=(i,a)=>{let r=!1;return a.forEach(c=>{i===c&&(r=!s.value[c])}),r};return(i,a)=>{const r=w("router-link"),c=w("Field"),_=w("ErrorMessage"),g=w("VForm");return d(),n("div",X,[e("header",Y,[e("nav",Z,[e("ol",ee,[e("li",se,[o(r,{to:"/admin/courses"},{default:p(()=>[P(" \u8AB2\u7A0B\u7BA1\u7406 ")]),_:1})]),ae])]),te]),e("div",le,[e("div",oe,[e("div",ie,[(d(!0),n(h,null,v(C,t=>(d(),n("a",{id:t.id,class:m(["list-group-item list-group-item-action",{active:t.active,disabled:j(t.target,["udemy_info","teachable_info"])}]),href:`#${t.target}`,role:"tab","aria-controls":t.target,key:t.id,ref_for:!0,ref:l=>k.push(l),onClick:R(l=>t.element.show(),["prevent"])},f(t.name),11,de))),128))])]),e("div",ne,[e("div",re,[e("div",ce,[e("div",ue,[me,e("div",_e,[o(g,{onSubmit:a[2]||(a[2]=t=>F(s.value.id))},{default:p(({errors:t,invalid:l})=>[e("div",be,[he,o(c,{id:"name",modelValue:s.value.name,"onUpdate:modelValue":a[0]||(a[0]=u=>s.value.name=u),name:"\u8AB2\u7A0B\u540D\u7A31",type:"text",class:m(["form-control",{"is-invalid":t.\u8AB2\u7A0B\u540D\u7A31}]),rules:"required"},null,8,["modelValue","class"]),o(_,{name:"\u8AB2\u7A0B\u540D\u7A31",class:"invalid-feedback"})]),e("div",ve,[fe,T(e("select",{id:"assistants","onUpdate:modelValue":a[1]||(a[1]=u=>s.value.default_assistants[0].user_id=u),name:"\u9810\u8A2D\u52A9\u6559",class:"form-control"},[pe,(d(!0),n(h,null,v(x.value,u=>(d(),n("option",{key:u.user_id,value:u.user_id},f(u.nickname),9,ye))),128))],512),[[O,s.value.default_assistants[0].user_id]])]),e("div",ge,[e("button",{type:"submit",class:"btn btn-primary",disabled:l}," \u5132\u5B58 ",8,we)])]),_:1})])])]),s.value.udemy_info?(d(),n("div",Ve,[e("div",ke,[Ce,e("div",xe,[o(g,null,{default:p(({errors:t})=>[e("div",De,[$e,o(c,{id:"udemy-name",modelValue:s.value.udemy_info.name,"onUpdate:modelValue":a[3]||(a[3]=l=>s.value.udemy_info.name=l),name:"\u8AB2\u7A0B\u540D\u7A31",type:"text",class:m(["form-control",{"is-invalid":t.\u8AB2\u7A0B\u540D\u7A31}]),rules:"required",readonly:""},null,8,["modelValue","class"]),o(_,{name:"\u8AB2\u7A0B\u540D\u7A31",class:"invalid-feedback"})]),e("div",Ue,[Te,e("div",{class:"bg-light p-3",innerHTML:s.value.udemy_info.description},null,8,Me)]),e("div",qe,[Le,o(c,{id:"abbr-name",modelValue:s.value.udemy_info.headline,"onUpdate:modelValue":a[4]||(a[4]=l=>s.value.udemy_info.headline=l),name:"\u8AB2\u7A0B\u7E2E\u5BEB",type:"text",class:m(["form-control",{"is-invalid":t.\u8AB2\u7A0B\u7E2E\u5BEB}]),rules:"required",readonly:""},null,8,["modelValue","class"]),o(_,{name:"\u8AB2\u7A0B\u7E2E\u5BEB",class:"invalid-feedback"})]),e("div",Se,[Ie,o(c,{id:"amount",modelValue:s.value.udemy_info.enrollments_count,"onUpdate:modelValue":a[5]||(a[5]=l=>s.value.udemy_info.enrollments_count=l),name:"\u8AB2\u7A0B\u8A3B\u518A\u4EBA\u6578",type:"text",class:m(["form-control",{"is-invalid":t.\u8AB2\u7A0B\u8A3B\u518A\u4EBA\u6578}]),rules:"required",readonly:""},null,8,["modelValue","class"]),o(_,{name:"\u8AB2\u7A0B\u8A3B\u518A\u4EBA\u6578",class:"invalid-feedback"})])]),_:1})])])])):V("",!0),s.value.teachable_info?(d(),n("div",Ae,[e("div",Ne,[Fe,e("div",Ee,[o(g,null,{default:p(({errors:t})=>[e("div",Be,[je,o(c,{id:"teachableId",modelValue:s.value.teachable_info.id,"onUpdate:modelValue":a[6]||(a[6]=l=>s.value.teachable_info.id=l),name:"Teachable ID",type:"text",class:m(["form-control",{"is-invalid":t["Teachable ID"]}]),rules:"required",readonly:""},null,8,["modelValue","class"]),o(_,{name:"Teachable ID",class:"invalid-feedback"})]),e("div",ze,[Ge,o(c,{id:"teachableName",modelValue:s.value.teachable_info.name,"onUpdate:modelValue":a[7]||(a[7]=l=>s.value.teachable_info.name=l),name:"\u8AB2\u7A0B\u540D\u7A31",type:"text",class:m(["form-control",{"is-invalid":t.\u8AB2\u7A0B\u540D\u7A31}]),rules:"required",readonly:""},null,8,["modelValue","class"]),o(_,{name:"\u8AB2\u7A0B\u540D\u7A31",class:"invalid-feedback"})]),e("div",He,[Pe,o(c,{id:"teachableAmount",modelValue:s.value.teachable_info.enrollments_count,"onUpdate:modelValue":a[8]||(a[8]=l=>s.value.teachable_info.enrollments_count=l),name:"\u8AB2\u7A0B\u8A3B\u518A\u4EBA\u6578",type:"text",class:m(["form-control",{"is-invalid":t.\u8AB2\u7A0B\u8A3B\u518A\u4EBA\u6578}]),rules:"required",readonly:""},null,8,["modelValue","class"]),o(_,{name:"\u8AB2\u7A0B\u8A3B\u518A\u4EBA\u6578",class:"invalid-feedback"})])]),_:1})])])])):V("",!0),e("div",Re,[e("div",Oe,[Qe,e("div",Je,[e("div",Ke,[e("div",We,[e("ol",Xe,[(d(!0),n(h,null,v(s.value.lectures,t=>(d(),n("li",{key:t.id,class:"d-flex justify-content-between align-items-start"},[e("div",Ye,[e("div",Ze,f(t.name),1),e("ul",es,[(d(!0),n(h,null,v(t.sub_lectures,l=>(d(),n("li",{key:l.id,class:"list-group-item"},f(l.hasTeachable?l.name:"-"),1))),128))])])]))),128))])]),e("div",ss,[e("ol",as,[(d(!0),n(h,null,v(s.value.lectures,t=>(d(),n("li",{key:t.id,class:"d-flex justify-content-between align-items-start"},[e("div",ts,[e("div",ls,f(t.name),1),e("ul",os,[(d(!0),n(h,null,v(t.sub_lectures,l=>(d(),n("li",{key:l.id,class:"list-group-item"},f(l.hasUdemy?l.name:"-"),1))),128))])])]))),128))])])])])])]),e("div",is,[e("div",ds,[ns,e("div",rs,[o(g,{onSubmit:a[13]||(a[13]=t=>D(s.value.id))},{default:p(({errors:t,invalid:l})=>[e("div",cs,[us,e("div",ms,[T(e("input",{id:"flexSwitchCheckDefault","onUpdate:modelValue":a[9]||(a[9]=u=>s.value.enable_review=u),class:"form-check-input",type:"checkbox",role:"switch",onClick:a[10]||(a[10]=u=>s.value.enable_review?E(s.value.id):D(s.value.id))},null,512),[[Q,s.value.enable_review]]),_s])]),s.value.enable_review?(d(),n(h,{key:0},[e("div",bs,[hs,o(c,{id:"name",modelValue:s.value.review_threshold_sec,"onUpdate:modelValue":a[11]||(a[11]=u=>s.value.review_threshold_sec=u),modelModifiers:{number:!0},name:"\u8A72\u8AB2\u7A0B\u53EF\u88AB\u8A55\u50F9\u7684\u6642\u6578\u9577\u5EA6",type:"number",min:"1",class:m(["form-control",{"is-invalid":t.\u8A72\u8AB2\u7A0B\u53EF\u88AB\u8A55\u50F9\u7684\u6642\u6578\u9577\u5EA6}]),rules:"required"},null,8,["modelValue","class"]),vs,o(_,{name:"\u8A72\u8AB2\u7A0B\u53EF\u88AB\u8A55\u50F9\u7684\u6642\u6578\u9577\u5EA6",class:"invalid-feedback"})]),e("div",fs,[ps,o(c,{id:"name",modelValue:s.value.percent_complete_threshold_of_review,"onUpdate:modelValue":a[12]||(a[12]=u=>s.value.percent_complete_threshold_of_review=u),modelModifiers:{number:!0},name:"\u8AB2\u7A0B\u5B8C\u6210\u5EA6",type:"number",min:"1",max:"100",class:m(["form-control",{"is-invalid":t.\u8AB2\u7A0B\u5B8C\u6210\u5EA6}]),rules:"required"},null,8,["modelValue","class"]),o(_,{name:"\u8AB2\u7A0B\u5B8C\u6210\u5EA6",class:"invalid-feedback"})])],64)):V("",!0),s.value.enable_review?(d(),n("div",ys,[e("button",{type:"submit",class:"btn btn-primary",disabled:l}," \u7DE8\u8F2F ",8,gs)])):V("",!0)]),_:1})])])])])])])])}}};export{$s as default};
