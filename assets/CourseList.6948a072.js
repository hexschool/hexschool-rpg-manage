import{r as n,o as w,z as g,a,e as R,f as C,A as _,M as S,b as e,D as q,w as z,c as r,F as L,q as N,h as V,Q as E,N as U,B as G,$ as j,x as k,p as x,g as A}from"./index.b171e68b.js";import{a as B}from"./courses.72b4d97b.js";import{a as I}from"./assistant.dd4561b8.js";const O={class:"mb-3"},P=e("label",{for:"addName",class:"form-label"},"\u8AB2\u7A0B\u540D\u7A31",-1),Q={class:"mb-3"},H=e("label",{for:"addAssistants",class:"form-label"},"\u9810\u8A2D\u52A9\u6559",-1),J=e("option",{value:"",disabled:""}," \u8ACB\u9078\u64C7\u52A9\u6559 ",-1),K=["value"],W=["disabled"],X={__name:"CreateCourseModal",emits:["createCourseMethod"],setup(F,{expose:M,emit:p}){const{apiPostCreateCourse:m}=B,{apiGetAssistantList:h}=I,i=n(),c=n(""),u=n(""),f=n(null),o=async()=>{try{const s={name:c.value};u.value&&(s.default_assistant_user_id=u.value),await m(s),p("createCourseMethod",{target:"import",type:"\u6210\u529F"}),i.value.resetForm()}catch(s){p("createCourseMethod",{target:"import",type:"\u5931\u6557",error:`${s.response.status}:${s.response.statusText}`})}},t=n([]),$=async()=>{try{const{assistants:s}=await h();t.value=s}catch(s){postMessage("danger","\u7372\u53D6\u52A9\u6559\u5217\u8868\u5931\u6557",`${s.response.data.statusCode}:${s.response.data.message}`)}};return w(()=>{$()}),M({createCourseModalRef:f}),(s,l)=>{const b=g("Field"),y=g("ErrorMessage"),v=g("VForm");return a(),R(v,{ref_key:"refs",ref:i,onSubmit:o},{default:C(({errors:T,invalid:D})=>[_(S,{id:"createCourseModal",ref_key:"createCourseModalRef",ref:f,"has-footer":!0,title:"\u65B0\u589E\u8AB2\u7A0B","class-list":""},{body:C(()=>[e("div",O,[P,_(b,{id:"addName",modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=d=>c.value=d),name:"\u8AB2\u7A0B\u540D\u7A31",type:"text",class:q(["form-control",{"is-invalid":T.\u8AB2\u7A0B\u540D\u7A31}]),rules:"required"},null,8,["modelValue","class"]),_(y,{name:"\u8AB2\u7A0B\u540D\u7A31",class:"invalid-feedback"})]),e("div",Q,[H,z(e("select",{id:"addAssistants","onUpdate:modelValue":l[1]||(l[1]=d=>u.value=d),name:"\u9810\u8A2D\u52A9\u6559",class:"form-control"},[J,(a(!0),r(L,null,N(t.value,d=>(a(),r("option",{key:d.user_id,value:d.user_id},V(d.nickname),9,K))),128))],512),[[E,u.value]])])]),footer:C(()=>[e("button",{type:"submit",disabled:D,class:"btn btn-primary"}," \u5EFA\u7ACB ",8,W)]),_:2},1536)]),_:1},512)}}},Y={class:"about px-4 mt-4 position-relative"},Z={class:"d-flex align-items-center justify-content-between"},ee=e("h1",{class:"fs-4 mb-0"}," \u8AB2\u7A0B\u7BA1\u7406 ",-1),se=e("hr",null,null,-1),te={class:"card shadow-sm rounded-4 overflow-hidden mb-4"},oe={class:"card-body p-0"},ae={class:"table-responsive"},re={class:"table table-hover mb-0 text-nowrap",style:{"font-size":"14px"}},ne=e("thead",{class:"bg-light"},[e("tr",null,[e("th",{scope:"col",class:"ps-4 py-3 text-muted border-0"}," \u8AB2\u7A0B\u540D\u7A31 "),e("th",{scope:"col",class:"py-3 text-muted border-0"}," \u52A9\u6559\u6578 "),e("th",{scope:"col",class:"py-3 text-muted border-0"}," \u5C0D\u61C9\u7684\u8AB2\u7A0B "),e("th",{scope:"col",class:"py-3 text-muted pe-3 border-0"}," \u7DE8\u8F2F ")])],-1),le={class:"text-nowrap"},de={scope:"row",class:"ps-4"},ie={class:"fs-6 mb-0"},ce=["href"],ue=["href"],_e={class:"pe-3"},pe=e("span",{class:"material-icons align-middle fs-6"}," edit ",-1),be={__name:"CourseList",setup(F){const{apiGetCourseList:M}=B,p=U.useLoading(),m=n([]),h=async()=>{const o=p.show();try{const{courses:t}=await M();m.value=t}catch(t){k("danger","\u53D6\u5F97\u8AB2\u7A0B\u5217\u8868\u5931\u6557",`${t.response.data.statusCode}:${t.response.data.message}`)}finally{o.hide()}};w(h);const i=n(""),c=n(null),u=()=>{i.value.show()},f=o=>{o.type==="\u6210\u529F"?k("success","\u5EFA\u7ACB\u8AB2\u7A0B\u6210\u529F","\u5DF2\u6210\u529F\u5EFA\u7ACB\u8AB2\u7A0B"):o.type==="\u5931\u6557"&&k("danger","\u5EFA\u7ACB\u8AB2\u7A0B\u5931\u6557",o.error),i.value.hide(),h()};return w(()=>{i.value=new G(c.value.createCourseModalRef.hModal),[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(t=>new j(t))}),(o,t)=>{const $=g("router-link");return a(),r("div",Y,[e("header",Z,[ee,e("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=s=>u())}," \u65B0\u589E\u8AB2\u7A0B ")]),se,e("div",te,[e("div",oe,[e("div",ae,[e("table",re,[ne,e("tbody",le,[(a(!0),r(L,null,N(m.value,s=>{var l,b,y,v;return a(),r("tr",{key:s.id,class:"align-middle"},[e("td",de,[e("h5",ie,V(s.name),1)]),e("td",null,V(s.assistant_count),1),e("td",null,[(l=s.teachable_info)!=null&&l.id?(a(),r("a",{key:0,href:s.teachable_info.url,target:"_blank"}," Teachable \u9023\u7D50 ",8,ce)):x("",!0),((b=s.udemy_info)==null?void 0:b.id)&&((y=s.teachable_info)==null?void 0:y.id)?(a(),r(L,{key:1},[A(" | ")],64)):x("",!0),(v=s.udemy_info)!=null&&v.id?(a(),r("a",{key:2,href:s.udemy_info.url,target:"_blank"}," Udemy \u9023\u7D50 ",8,ue)):x("",!0)]),e("td",_e,[_($,{to:`/admin/courses/${s.id}`,class:"btn btn-sm btn-outline-gray"},{default:C(()=>[pe,A(" \u7DE8\u8F2F ")]),_:2},1032,["to"])])])}),128))])])])])]),_(X,{ref_key:"createCourseModalComponentRef",ref:c,onCreateCourseMethod:f},null,512)])}}};export{be as default};
