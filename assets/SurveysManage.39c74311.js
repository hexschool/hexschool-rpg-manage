import{r as k,a as i,e as A,f as Q,g as B,b as a,M as F,N as O,o as M,c as u,F as S,q as T,A as E,B as G,x as c,w as V,C as j,p as m,v as z}from"./index.b171e68b.js";import{a as H}from"./surveys.0ceefe2b.js";const J=a("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," \u53D6\u6D88 ",-1),K={__name:"AlertModal",emits:["deleteQuestionnaire"],setup(D,{expose:f,emit:w}){const r=k(null);return f({modalRef:r}),(g,b)=>(i(),A(F,{ref_key:"modalRef",ref:r,title:"\u522A\u9664\u554F\u5238","has-footer":!0},{body:Q(()=>[B(" \u4F60\u78BA\u5B9A\u8981\u522A\u9664\uFF1F ")]),footer:Q(()=>[J,a("button",{type:"button",class:"btn btn-danger",onClick:b[0]||(b[0]=v=>w("deleteQuestionnaire"))}," \u522A\u9664 ")]),_:1},512))}},W={class:"px-4 mt-4"},X=a("h1",{class:"fs-4 mb-3"}," \u8A55\u50F9\u7BA1\u7406 ",-1),Y={class:"card shadow-sm rounded"},Z=a("div",{class:"card-header"},[a("h5",{class:"text-secondary my-2"}," \u8A55\u50F9\u5167\u5BB9\u8A2D\u5B9A ")],-1),q={class:"card-body"},ee={class:"table table-borderless"},te=a("thead",null,[a("tr",{class:"text-secondary"},[a("th",{style:{width:"100px"}}," \u555F\u7528\u72C0\u614B "),a("th",null,"\u8A55\u50F9\u540D\u7A31"),a("th",{class:"w-25"})])],-1),se={class:"align-middle"},ae={class:"form-check form-switch"},oe=["onUpdate:modelValue","checked","onChange"],ne=["onUpdate:modelValue","disabled"],le={class:"d-flex align-items-center"},de=["onClick"],ce=["onClick"],ie=["onClick"],ue=a("span",{class:"material-icons-outlined"}," close ",-1),he=[ue],pe=a("td",null,null,-1),_e=a("span",{class:"material-icons-outlined me-1"}," add_circle_outline ",-1),me={__name:"SurveysManage",setup(D){const{apiGetVideoCoursesQuestionnaires:f,apiPostVideoCoursesQuestionnaires:w,apiPutVideoCoursesQuestionnaires:r,apiDeleteVideoCoursesQuestionnaires:g,apiPutVideoCoursesOpenQuestionnaires:b,apiDeleteVideoCoursesCloseQuestionnaires:v}=H,h=O.useLoading(),$=k(null);let C=null;M(()=>{C=new G($.value.modalRef.hModal)});const y=k([]),p=async()=>{var l,e,n,s;const d=h.show();try{const{questionnaires:t}=await f();y.value=t}catch(t){c("danger","\u53D6\u5F97\u8A55\u50F9\u5217\u8868\u5931\u6557",`${(e=(l=t==null?void 0:t.response)==null?void 0:l.data)==null?void 0:e.statusCode}:${(s=(n=t==null?void 0:t.response)==null?void 0:n.data)==null?void 0:s.message}`)}finally{d.hide()}};M(p);const N=async d=>{var e,n,s,t;const l=h.show();try{await w(d),await p(),c("success","\u66F4\u65B0\u554F\u5377\u6210\u529F","\u5DF2\u6210\u529F\u65B0\u589E\u554F\u5377")}catch(o){c("danger","\u53D6\u5F97\u8A55\u50F9\u5217\u8868\u5931\u6557",`${(n=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:n.statusCode}:${(t=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:t.message}`)}finally{l.hide()}},R=async(d,l)=>{var n,s,t,o;const e=h.show();try{await r(d,{question:l.question}),await p(),c("success","\u66F4\u65B0\u554F\u5377\u6210\u529F","\u5DF2\u6210\u529F\u66F4\u65B0\u554F\u5377")}catch(_){c("danger","\u53D6\u5F97\u8A55\u50F9\u5217\u8868\u5931\u6557",`${(s=(n=_==null?void 0:_.response)==null?void 0:n.data)==null?void 0:s.statusCode}:${(o=(t=_==null?void 0:_.response)==null?void 0:t.data)==null?void 0:o.message}`)}finally{e.hide()}};let x=null;const L=async()=>{var l,e,n,s;const d=h.show();try{C.hide(),await g(x),await p(),c("success","\u66F4\u65B0\u554F\u5377\u6210\u529F","\u5DF2\u6210\u529F\u522A\u9664\u554F\u5377")}catch(t){c("danger","\u53D6\u5F97\u8A55\u50F9\u5217\u8868\u5931\u6557",`${(e=(l=t==null?void 0:t.response)==null?void 0:l.data)==null?void 0:e.statusCode}:${(s=(n=t==null?void 0:t.response)==null?void 0:n.data)==null?void 0:s.message}`)}finally{d.hide()}},U=async d=>{var e,n,s,t;const l=h.show();try{await b(d),await p(),c("success","\u66F4\u65B0\u554F\u5377\u6210\u529F","\u5DF2\u6210\u529F\u958B\u555F\u554F\u5377")}catch(o){c("danger","\u554F\u5377\u958B\u555F\u5931\u6557",`${(n=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:n.statusCode}:${(t=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:t.message}`)}finally{l.hide()}},I=async d=>{var e,n,s,t;const l=h.show();try{await v(d),await p(),c("success","\u66F4\u65B0\u554F\u5377\u6210\u529F","\u5DF2\u6210\u529F\u95DC\u9589\u554F\u5377")}catch(o){c("danger","\u554F\u5377\u95DC\u9589\u5931\u6557",`${(n=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:n.statusCode}:${(t=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:t.message}`)}finally{l.hide()}},P=d=>{x=d,C.show()};return(d,l)=>(i(),u("div",W,[X,a("div",Y,[Z,a("div",q,[a("table",ee,[te,a("tbody",null,[(i(!0),u(S,null,T(y.value,(e,n)=>(i(),u("tr",{key:e.id},[a("td",se,[a("div",ae,[e.id?V((i(),u("input",{key:0,id:"flexSwitchCheckDefault","onUpdate:modelValue":s=>e.enable=s,class:"form-check-input",type:"checkbox",role:"switch","true-value":1,"false-value":0,checked:e.enable,onChange:s=>e.enable?U(e.id):I(e.id)},null,40,oe)),[[j,e.enable]]):m("",!0)])]),a("td",null,[V(a("input",{"onUpdate:modelValue":s=>e.question=s,type:"text",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u5167\u5BB9",disabled:e.id?e.enable:null},null,8,ne),[[z,e.question]])]),a("td",le,[e.id&&!e.enable?(i(),u("button",{key:0,type:"button",class:"btn btn-outline-dark",onClick:s=>R(e.id,e)}," \u5B8C\u6210 ",8,de)):m("",!0),e.id?m("",!0):(i(),u("button",{key:1,type:"button",class:"btn btn-outline-primary",onClick:s=>N(e)}," \u65B0\u589E ",8,ce)),!e.enable||!e.id?(i(),u("button",{key:2,type:"button",class:"btn d-flex",onClick:s=>e.id?P(e.id):y.value.splice(n,1)},he,8,ie)):m("",!0)])]))),128)),a("tr",null,[pe,a("td",null,[a("button",{type:"button",class:"btn d-flex text-primary d-flex",onClick:l[0]||(l[0]=e=>y.value.push({question:""}))},[_e,B(" \u65B0\u589E\u8A55\u50F9 ")])])])])])])]),E(K,{ref_key:"alertRef",ref:$,onDeleteQuestionnaire:L},null,512)]))}};export{me as default};
